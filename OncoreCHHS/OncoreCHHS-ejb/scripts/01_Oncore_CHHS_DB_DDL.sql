-- MySQL Script generated by MySQL Workbench
-- Wed 18 May 2016 07:45:57 PM PDT
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema chhsdb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `chhsdb` ;

-- -----------------------------------------------------
-- Schema chhsdb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `chhsdb` DEFAULT CHARACTER SET utf8 ;
USE `chhsdb` ;

-- -----------------------------------------------------
-- Table `chhsdb`.`USERS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `chhsdb`.`USERS` ;

CREATE TABLE IF NOT EXISTS `chhsdb`.`USERS` (
  `USR_UID` INT NOT NULL AUTO_INCREMENT,
  `USR_USER_ID` VARCHAR(32) NOT NULL,
  `USR_PASSWORD` VARCHAR(256) NOT NULL,
  `USR_FIRSTNAME` VARCHAR(45) NULL,
  `USR_MIDDLENAME` VARCHAR(45) NULL,
  `USR_LASTNAME` VARCHAR(45) NULL,
  `CREATE_USER_ID` VARCHAR(32) NOT NULL,
  `CREATE_TS` DATETIME NOT NULL,
  `UPDATE_USER_ID` VARCHAR(32) NOT NULL,
  `UPDATE_TS` DATETIME NOT NULL,
  PRIMARY KEY (`USR_UID`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `EMP_UID_UNIQUE` ON `chhsdb`.`USERS` (`USR_UID` ASC);

CREATE UNIQUE INDEX `EMP_USER_ID_UNIQUE` ON `chhsdb`.`USERS` (`USR_USER_ID` ASC);


-- -----------------------------------------------------
-- Table `chhsdb`.`EMC_TYPE_CD`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `chhsdb`.`EMC_TYPE_CD` ;

CREATE TABLE IF NOT EXISTS `chhsdb`.`EMC_TYPE_CD` (
  `CODE` CHAR(4) NOT NULL,
  `SHORT_DESC` VARCHAR(64) NOT NULL,
  `LONG_DESC` VARCHAR(128) NOT NULL,
  `CREATE_USER_ID` VARCHAR(32) NOT NULL,
  `CREATE_TS` DATETIME NOT NULL,
  `UPDATE_USER_ID` VARCHAR(32) NOT NULL,
  `UPDATE_TS` DATETIME NOT NULL,
  PRIMARY KEY (`CODE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `chhsdb`.`CONTACT`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `chhsdb`.`CONTACT` ;

CREATE TABLE IF NOT EXISTS `chhsdb`.`CONTACT` (
  `EMC_UID` INT NOT NULL AUTO_INCREMENT,
  `USR_UID_FK` INT NOT NULL,
  `EMC_TYPE_CD` CHAR(4) NOT NULL,
  `EMC_VALUE` VARCHAR(256) NOT NULL,
  `CREATE_USER_ID` VARCHAR(32) NOT NULL,
  `CREATE_TS` DATETIME NOT NULL,
  `UPDATE_USER_ID` VARCHAR(32) NOT NULL,
  `UPDATE_TS` DATETIME NOT NULL,
  PRIMARY KEY (`EMC_UID`),
  CONSTRAINT `fk_USERS_CONTACT`
    FOREIGN KEY (`USR_UID_FK`)
    REFERENCES `chhsdb`.`USERS` (`USR_UID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EMC_TYPE_CD`
    FOREIGN KEY (`EMC_TYPE_CD`)
    REFERENCES `chhsdb`.`EMC_TYPE_CD` (`CODE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_EMPLOYEE_CONTACT_EMPLOYEES_idx` ON `chhsdb`.`CONTACT` (`USR_UID_FK` ASC);

CREATE INDEX `fk_EMC_TYPE_CD_idx` ON `chhsdb`.`CONTACT` (`EMC_TYPE_CD` ASC);


-- -----------------------------------------------------
-- Table `chhsdb`.`ADR_STATE_CD`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `chhsdb`.`ADR_STATE_CD` ;

CREATE TABLE IF NOT EXISTS `chhsdb`.`ADR_STATE_CD` (
  `CODE` CHAR(2) NOT NULL,
  `SHORT_DESC` VARCHAR(64) NOT NULL,
  `LONG_DESC` VARCHAR(128) NOT NULL,
  `CREATE_USER_ID` VARCHAR(32) NOT NULL,
  `CREATE_TS` DATETIME NOT NULL,
  `UPDATE_USER_ID` VARCHAR(32) NOT NULL,
  `UPDATE_TS` DATETIME NOT NULL,
  PRIMARY KEY (`CODE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `chhsdb`.`ADR_COUNTRY_CD`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `chhsdb`.`ADR_COUNTRY_CD` ;

CREATE TABLE IF NOT EXISTS `chhsdb`.`ADR_COUNTRY_CD` (
  `CODE` CHAR(4) NOT NULL,
  `SHORT_DESC` VARCHAR(64) NOT NULL,
  `LONG_DESC` VARCHAR(128) NOT NULL,
  `CREATE_USER_ID` VARCHAR(32) NOT NULL,
  `CREATE_TS` DATETIME NOT NULL,
  `UPDATE_USER_ID` VARCHAR(32) NOT NULL,
  `UPDATE_TS` DATETIME NOT NULL,
  PRIMARY KEY (`CODE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `chhsdb`.`ADDRESS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `chhsdb`.`ADDRESS` ;

CREATE TABLE IF NOT EXISTS `chhsdb`.`ADDRESS` (
  `ADR_UID` INT NOT NULL AUTO_INCREMENT,
  `USR_UID_FK` INT NOT NULL,
  `ADR_LINE1` VARCHAR(128) NULL,
  `ADR_LINE2` VARCHAR(128) NULL,
  `ADR_CITY` VARCHAR(64) NULL,
  `ADR_STATE_CD` CHAR(2) NULL,
  `ADR_COUNTRY_CD` CHAR(4) NULL,
  `ADR_ZIP5` CHAR(5) NULL,
  `ADR_ZIP4` CHAR(4) NULL,
  `ADR_FOREIGN_ZIP` VARCHAR(32) NULL,
  `ADR_RTN_IND` INT NOT NULL DEFAULT 0 COMMENT '0 NO MAIL HAS BEEN BOUNCED FOR THIS ADDRESS, 1 MAIL RETURNED FOR THIS ADDRESS',
  `ADR_LOCATION_IND` INT NOT NULL DEFAULT 0 COMMENT '0 DOMESTIC, 1 FOREIGN',
  `CREATE_USER_ID` VARCHAR(32) NOT NULL,
  `CREATE_TS` DATETIME NOT NULL,
  `UPDATE_USER_ID` VARCHAR(32) NOT NULL,
  `UPDATE_TS` DATETIME NOT NULL,
  PRIMARY KEY (`ADR_UID`),
  CONSTRAINT `fk_ADDRESS_USERS`
    FOREIGN KEY (`USR_UID_FK`)
    REFERENCES `chhsdb`.`USERS` (`USR_UID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ADR_STATE_CD`
    FOREIGN KEY (`ADR_STATE_CD`)
    REFERENCES `chhsdb`.`ADR_STATE_CD` (`CODE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ADR_COUNTRY_CD`
    FOREIGN KEY (`ADR_COUNTRY_CD`)
    REFERENCES `chhsdb`.`ADR_COUNTRY_CD` (`CODE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE UNIQUE INDEX `ADR_UID_UNIQUE` ON `chhsdb`.`ADDRESS` (`ADR_UID` ASC);

CREATE INDEX `fk_ADDRESS_EMPLOYEES1_idx` ON `chhsdb`.`ADDRESS` (`USR_UID_FK` ASC);

CREATE INDEX `fk_ADR_STATE_CD_idx` ON `chhsdb`.`ADDRESS` (`ADR_STATE_CD` ASC);

CREATE INDEX `fk_ADR_COUNTRY_CD_idx` ON `chhsdb`.`ADDRESS` (`ADR_COUNTRY_CD` ASC);


-- -----------------------------------------------------
-- Table `chhsdb`.`MESSAGES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `chhsdb`.`MESSAGES` ;

CREATE TABLE IF NOT EXISTS `chhsdb`.`MESSAGES` (
  `MSG_UID` INT NOT NULL AUTO_INCREMENT,
  `USR_UID_FK` INT NOT NULL,
  `MSG_FROM` VARCHAR(45) NULL,
  `MSG_TO` VARCHAR(45) NULL,
  `MSG_TEXT` VARCHAR(2048) NULL,
  `MSG_TO_USER_IND` TINYINT(1) NOT NULL COMMENT 'IF TRUE MESSAGE IS\nINBOUND TO THE USER,\nFALSE THE MESSAGE IS\nBEING SENT TO THE \nCASE WORKER.',
  `MSG_CREATED_TS` DATETIME NULL,
  `CREATE_USER_ID` VARCHAR(32) NOT NULL,
  `CREATE_TS` DATETIME NOT NULL,
  `UPDATE_USER_ID` VARCHAR(32) NOT NULL,
  `UPDATE_TS` DATETIME NOT NULL,
  PRIMARY KEY (`MSG_UID`),
  CONSTRAINT `fk_MESSAGES_USERS1`
    FOREIGN KEY (`USR_UID_FK`)
    REFERENCES `chhsdb`.`USERS` (`USR_UID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE UNIQUE INDEX `MSG_UID_UNIQUE` ON `chhsdb`.`MESSAGES` (`MSG_UID` ASC);

CREATE INDEX `fk_MESSAGES_USERS1_idx` ON `chhsdb`.`MESSAGES` (`USR_UID_FK` ASC);


-- -----------------------------------------------------
-- Table `chhsdb`.`CHILDREN`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `chhsdb`.`CHILDREN` ;

CREATE TABLE IF NOT EXISTS `chhsdb`.`CHILDREN` (
  `CLD_UID` INT NOT NULL AUTO_INCREMENT,
  `USR_UID_FK` INT NOT NULL,
  `CLD_FIRSTNAME` VARCHAR(45) NULL,
  `CLD_MIDDLENAME` VARCHAR(45) NULL,
  `CLD_LASTNAME` VARCHAR(45) NULL,
  `CLD_AGE` INT(11) NULL,
  `CREATE_USER_ID` VARCHAR(32) NOT NULL,
  `CREATE_TS` DATETIME NOT NULL,
  `UPDATE_USER_ID` VARCHAR(32) NOT NULL,
  `UPDATE_TS` DATETIME NOT NULL,
  PRIMARY KEY (`CLD_UID`),
  CONSTRAINT `fk_CHILDREN_USERS1`
    FOREIGN KEY (`USR_UID_FK`)
    REFERENCES `chhsdb`.`USERS` (`USR_UID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE UNIQUE INDEX `CLD_UID_UNIQUE` ON `chhsdb`.`CHILDREN` (`CLD_UID` ASC);

CREATE INDEX `fk_CHILDREN_USERS1_idx` ON `chhsdb`.`CHILDREN` (`USR_UID_FK` ASC);


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
